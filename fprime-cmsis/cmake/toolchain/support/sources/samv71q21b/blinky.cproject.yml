project:
  compiler: GCC
  language-C: c11
  language-CPP: c++11

  # NOTE an alternative method for passing flags on a per project basis
  # misc:
  #   - for-compiler: GCC
  #     Link:
  #       - -specs=nosys.specs

  description: Blinking LED application for SAMV71 Xplained board.

  packs:
    - pack: Microchip::SAMV71_DFP@4.10.230
    # - pack: Keil::MDK-Middleware@7.16.0
    - pack: ARM::CMSIS@6.1.0
    - pack: ARM::Cortex_DFP@1.1.0
    - pack: ARM::CMSIS-Driver@2.10.0
    - pack: ARM::CMSIS-Compiler@2.1.0
    - pack: ARM::CMSIS-View@1.2.0
    - pack: ARM::CMSIS-FreeRTOS@11.1.0

  components:
    - component: Microchip::Device:Startup
    - component: CMSIS:CORE                      # CMSIS Core component
    - component: CMSIS:OS Tick:SysTick
    # NOTE we shouldnt actually need these since we pass -specs=nosys.specs
    # but other wise we get linker errors about _close_r and nano
    - component: CMSIS-Compiler:CORE
    - component: CMSIS-Compiler:OS Interface:CMSIS-RTOS2
    - component: ARM::CMSIS Driver:GPIO:Custom
    - component: ARM::CMSIS:RTOS2:FreeRTOS&Cortex-M
    - component: ARM::RTOS&FreeRTOS:Config&CMSIS RTOS2
    - component: ARM::RTOS&FreeRTOS:Core&Cortex-M
    - component: ARM::RTOS&FreeRTOS:Event Groups
    - component: ARM::RTOS&FreeRTOS:Heap&Heap_4
    - component: ARM::RTOS&FreeRTOS:Timers

  linker:
    - script: ./src/startup_samv71q21b.ld

  define:
    - __DEBUG                                    # Include if debugging is enabled
    - USE_CMSIS_INIT
  groups:
    # - group: Documentation
    #   files:
    #     - file: README.md

    # - group: Application
    #   files:
    #     - file: hello.c

    # - group: Device
    #   add-path:
    #     - RTE/Device/ATSAMV71Q21B
    #   files:
    #     - file: RTE/Device/ATSAMV71Q21B/interrupts.c
    #     - file: src/main.c
    #     - file: src/freeRTOS_hooks.c
    #     - file: src/Driver_GPIO.c

    - group: Device
      add-path:
        - RTE/Device/ATSAMV71Q21B
      files:
        - file: harmony/sam_v71_xult/peripheral/pio/interrupts.c
        - file: RTE/Device/ATSAMV71Q21B/interrupts.c
        - file: src/main.c
        - file: src/freeRTOS_hooks.c
        - file: src/Driver_GPIO.c

  # layers:
  #   - layer: $Target-Layer$
  #     type: Target
